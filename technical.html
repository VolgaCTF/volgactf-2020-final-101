<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>VolgaCTF 2020 Final &ndash; Regulations</title>

    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/sticky-footer.css" rel="stylesheet">
  </head>

  <body>
    <nav class="navbar navbar-dark bg-dark">
      <a class="navbar-brand" href="./">
        <img src="./img/volgactf-logo.svg" height="30" class="d-inline-block align-top" alt="VolgaCTF logo">
        &nbsp;
        VolgaCTF 2020 Final
      </a>
    </nav>
    <main role="main" class="container mb-5">
      <h1 class="mt-5">VolgaCTF 2020 Final &ndash; Technical information</h1>

      <ul class="lead">
        <li><a href="#network">Network</a></li>
        <li><a href="#vulnbox">Vulnbox</a></li>
        <li><a href="#extra-instance">Extra instance</a></li>
        <li><a href="#flag-signatures">Flag​ ​signatures</a></li>
        <li><a href="#submitting-flags​">Submitting​ ​flags</a></li>
        <li><a href="#an-insight-into-acs">An​ ​insight​ ​into​ ​ACS</a></li>
      </ul>

      <h2 id="network" class="mt-4">Network</h2>
      <p>Each team's network segment has the following address: <code>172.25.2xx.0/24</code>, where <strong>xx</strong> stands for a team's number (from 00 to 23).</p>
      <p>Scoreboard URL (intranet): <a href="http://final.volgactf.ru/scoreboard" target="_blank" rel="noopener">final.volgactf.ru/scoreboard</a></p>
      <p>Scoreboard URL (public): <a href="https://live.volgactf.ru/scoreboard" target="_blank" rel="noopener">live.volgactf.ru/scoreboard</a></p>

      <h2 id="vulnbox" class="mt-4">Vulnbox</h2>
      <!-- <p><a href="http://final.volgactf.ru/media/volgactf2019final.zip" target="_blank" rel="noopener">Vulnbox</a></p> -->
<!--       <p style="font-variant: small-caps;">before launching the vulnbox, do not forget to regenerate your virtual machine instance mac address!</p> -->
      <p>Vulnbox instances have the following address: <code>10.13.37.2xx</code>, where xx stands for a team's number (from 00 to 23).</p>
      <p>Network traffic <strong>to</strong> vulnbox instances will be seen as originating from <code>10.20.20.188</code>. In other words, there is no way to detect whether network packets actually come from service checkers, other teams etc.</p>
      <p>Network traffic <strong>from</strong> vulnbox instances will be seen as originating from <code>10.20.20.103</code>.</p>
      <p>A vulnbox is based on Ubuntu 18.04 x64 Server, all services are isolated from each other by the means of Docker. Containers start at boot.</p>

      <h2 id="extra-instance" class="mt-4">Extra instance</h2>
      <p>Extra instances are placed within each team's network segment, one for each team.</p>
      <p>Make use of an <strong>extra instance</strong> so as to <strong>avoid network latency</strong> issues between the cloud infrastructure and your computers.</p>
      <p>It is <strong>strongly recommended</strong> that you launch attacks and submit captured flags from an extra instance.</p>

<!--       <h3 class="mt-3">LXC</h3>
      <p>
        All​ ​commands​ ​below​ ​should​ ​be​ ​performed​ ​on​ ​behalf​ ​of​ ​root​ ​user.
      </p>
      <p>
        List​ ​containers<br>
        <kbd>$​ ​lxc list</kbd>
      </p>
      <p>
        By​ ​default​ ​all​ ​containers​ ​will​ ​be​ ​"running".​ ​To​ ​stop​ ​a​ ​container,​ ​run<br>
        <kbd>$​ ​lxc stop​ ​​&lt;CONTAINER_NAME&gt;</kbd>
      </p>
      <p>
        Starting​ ​a​ ​container<br>
        <kbd>$​ ​lxc start​ ​​&lt;CONTAINER-NAME&gt;</kbd>
      </p>
      <p>
        Access​ ​a​ ​container's​ ​console<br>
        <kbd>$​ ​lxc exec &lt;CONTAINER_NAME&gt; -- /bin/bash</kbd>
      </p>
      <p>
        Exit​ ​a​ ​container's​ ​console<br>
        <kbd>Ctrl​ ​+​ ​D</kbd>
      </p>

      <h3 class="mt-3">Services</h3>
      <p>
        Each service is located in a home directory of a container's default user account. Managing a service is simple:<br>
        <kbd>$ systemctl stop &lt;SERVICE_NAME&gt;</kbd><br>
        <kbd>$ systemctl stop &lt;SERVICE_NAME&gt;</kbd>
      </p>
 -->
      <h2 id="flag-signatures" class="mt-4">Flag​ ​signatures</h3>
      <p>
        Flags are stored and transported into so-called ​capsules​. A capsule looks​ ​like​ ​this:
        <code>
          VolgaCTF{eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJmbGFnIjoiYzA4ODI0NjI2MjNkNjFmM2VlYzgwYjcyY2ZlNDQ3NjkifQ.YqcT52o3_S9XhjE6txPayJ-iylCHhpQs4SzfnCwKKsP3_XGol30GQVWf9QZ85RaO4l5uXVOgrkF335UIDn7x4A}
        </code>
      </p>

      <p>
        Data between ​<code>VolgaCTF{</code> and <code>​}</code> is a <a href="https://jwt.io" target="_blank" rel="noopener">​JSON Web Token</a> signed using ES256 algorithm. You will need ​ACS <a href="http://final.volgactf.ru/api/capsule/v1/public_key" target="_blank" rel="noopener">public key</a> to decode a capsule and​ ​obtain​ ​a​ ​flag​ ​from​ ​it.​ ​Flag​ ​format​ ​is​ ​​<code>^[\da-f]{32}=$</code>.
      </p>

      <p>
        <details>
          <summary>Public key (for the sample capsule)</summary>
          <code>
            -----BEGIN PUBLIC KEY-----
            MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE5aiazVMn0K9M0PyP4/iGZpKKqYez\n+6rCzO8iUjfkVvH87KcccPfNzv2olMtrFvF1bTLBAchFfDiNqewauTe/GA==
            -----END PUBLIC KEY-----
          </code>
        </details>
      </p>

      <h2 id="submitting-flags​" class="mt-4">Submitting​ ​flags</h3>
      <p>
        You should submit <strong>flags</strong> to the following endpoint: <code>https://final.volgactf.ru</code>.
      </p>
      <p><strong>ATTENTION! Flags submission attempts originating from vulnboxes won't be accepted by the system.</strong></p>
      <p>Each flag's lifetime is 6 minutes.</p>

      <h3 class="mt-3">API</h3>
      <ul>
        <li><a href="https://github.com/VolgaCTF/volgactf-final-api" target="_blank" rel="noopener">VolgaCTF Final API</a>&nbsp;public APIs description</li>
        <li><a href="https://github.com/VolgaCTF/volgactf-final-py" target="_blank" rel="noopener">volgactf.final</a>&nbsp;CLI & public API library for Python 2/3</li>
      </ul>

      <h3 class="mt-3">Rate limits</h3>
      <ul>
        <li>Flag info <code>10r/s</code></li>
        <li>Flag submit <code>5r/s</code></li>
        <li>Service status <code>10r/s</code></li>
      </ul>

      <h2 id="an-insight-into-acs" class="mt-4">An​ ​insight​ ​into​ ​ACS</h2>
      <p>
        A​ ​game​ ​is​ ​divided​ ​in​ ​2-minute​ ​rounds.
      </p>
      <p>
        When a new round is triggered, ACS tries to push flags (transported in capsules) to every service of every team. If a push attempt of a flag is successful, this particular flag is marked as ​<strong>active</strong>​. ACS immediately tries to pull <strong>active</strong> flags.
      </p>
      <p>
        Every flag expires 6 minutes​ ​after​ ​it​ ​has​ ​been​ ​marked​ ​as​ <strong>a​​ctive</strong>​.
      </p>
      <p>
        Additionally, ​in each round ACS​ launches 3 <strong>polls</strong>: it ​pulls​ ​one ​randomly​ ​chosen​ ​​<strong>active</strong>​ ​​flag from each service from each team.
      </p>
      <p>
        Scores are updated when all <strong>active</strong> flags issued in a particular round become <strong>expired</strong>.
      </p>

      <h3 class="mt-3">Availability</h3>
      <p>
        1 point for ​<strong>availability</strong> ​(AP<sub​>flag</sub​>)​ is given if all attempts to pull a flag were successful (<strong>​UP</strong> state). Otherwise, a fraction of a point is given according to​ ​the​ ​equation:
      </p>
      <p>
        AP<sub>​flag</sub>​​ ​=​ ​SPA<sub>​flag</sub>​​ ​/​ ​TPA<sub>​flag</sub>,
      </p>
      <p>
        where SPA stands for the number of successful pull attempts and TPA stands​ ​for​ ​the​ ​total​ ​number​ ​of​ ​pull​ ​attempts.
      </p>

      <h3 class="mt-3">Defence</h3>
      <p>
        By default, no defence points for flags from a service are given.
      </p>
      <p>
        Points are to be awarded starting from the next round a service is attacked by any team. 1 point for ​<strong>defence</strong> ​(DP<sub>f​lag</sub>)​ is given if ​<strong>all</strong> attempts to pull a flag were successful and no-one has stolen and submitted this particular flag into ACS.
      </p>

      <h3 class="mt-3">Attack</h3>
      <p>
        1​ ​point​ ​for​ ​​attack​ ​​is​ ​given​ ​for​ ​each​ ​stolen​ ​flag.
      </p>
      <p>
        A team ​cannot ​submit a flag stolen from a service <strong>X</strong> if a state of a service​ <strong>​X</strong>​ ​in​ ​their​ ​vulnbox​ ​is​ ​not​ ​​<strong>UP</strong>​.
      </p>

      <h3 class="mt-3">Total</h3>
      <p>
        Total​ ​team​ ​score​ ​(TtS)​ ​is​ ​calculated​ ​as a sum of total scores (tS) in each category:
      </p>
      <p>
        TtS​ ​=​ ​tS<sub>​attack</sub>​​ ​+​ ​tS<sub>​defence</sub>​​ ​+​ tS<sub>​availability</sub>​
      </p>
      <p>
        In case of equal TtS a team who performed the last attack before the other​ ​team​ ​is​ ​placed​ ​higher​ ​in​ ​the​ ​scoreboard.
      </p>
    </main>

    <footer class="footer">
      <div class="container">
        <span class="text-muted">© 2020 <a href="https://volgactf.ru/en" target="_blank" rel="noopener">VolgaCTF</a></span>
      </div>
    </footer>
</body></html>